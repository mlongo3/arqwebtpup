
<script type="text/javascript">
	let userList = document.createElement('ul')	

	const myHeaders = new Headers();
	myHeaders.append('authorization',`Bearer ${localStorage.token}`)

	fetch('/api/usuarios',{
		method: 'GET',
		headers: myHeaders
	})
	.then(res => {		
		if (res.status >= 400 && res.status < 600) {      		
      		throw new Error(`Fallo con status: ${res.status}`);
	    }
	    return res.json();
	})
	.then(data =>{			
			data.usuarios.map(usuario => {
			let text = document.createTextNode(usuario.displayName)			
			let elem = document.createElement('li')
			elem.appendChild(text)			
			userList.appendChild(elem)
		})		
		document.body.appendChild(userList)			
	})	
	.catch((error) =>{	
		//console.log('catch')	
		console.log(`${error}`)
	})
</script>